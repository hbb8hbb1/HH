# å¤šç»´åº¦ç­›é€‰é—®é¢˜åˆ†æ

## ğŸ“ ç›¸å…³æ–‡ä»¶

### å‰ç«¯ç­›é€‰é€»è¾‘å’Œæ ‡ç­¾é…ç½®
1. **`HH-main/App.tsx`**
   - è¡Œ 12-44: `INDUSTRY_CONFIGS` - ç¡¬ç¼–ç çš„ç­›é€‰æ ‡ç­¾é…ç½®
   - è¡Œ 46: `RECRUIT_TYPES` - æ‹›è˜ç±»å‹é€‰é¡¹
   - è¡Œ 139-146: `filters` çŠ¶æ€å®šä¹‰
   - è¡Œ 163-284: `fetchPosts` å‡½æ•° - æ„å»ºç­›é€‰å‚æ•°å¹¶è°ƒç”¨API
   - è¡Œ 297-313: `useEffect` - ç›‘å¬ç­›é€‰æ¡ä»¶å˜åŒ–
   - è¡Œ 328-353: `updateFilter` å‡½æ•° - æ›´æ–°ç­›é€‰æ¡ä»¶
   - è¡Œ 381-391: `filteredPosts` - å‰ç«¯è¿‡æ»¤é€»è¾‘ï¼ˆå·²ç®€åŒ–ï¼Œç°åœ¨ç”±åç«¯å®Œæˆï¼‰
   - è¡Œ 491-508: ç­›é€‰UIç»„ä»¶æ¸²æŸ“

### åç«¯ç­›é€‰é€»è¾‘
2. **`HH-main/server/index.js`**
   - è¡Œ 55-160: `/api/posts` GETæ¥å£
   - è¡Œ 62-70: æå–ç­›é€‰å‚æ•°
   - è¡Œ 91-132: æ„å»ºMongoDBæŸ¥è¯¢æ¡ä»¶
   - è¡Œ 134-137: æ‰§è¡ŒæŸ¥è¯¢å¹¶è¿”å›ç»“æœ

### æ•°æ®æ¨¡å‹
3. **`HH-main/server/models/Post.js`**
   - è¡Œ 14-48: Post Schemaå®šä¹‰
   - è¡Œ 23-30: `tagDimensions` å­—æ®µç»“æ„
   - è¡Œ 50-58: ç´¢å¼•å®šä¹‰

### ç±»å‹å®šä¹‰
4. **`HH-main/types.ts`**
   - `TagDimensions` æ¥å£å®šä¹‰

## ğŸ› ä¸»è¦é—®é¢˜

### é—®é¢˜1ï¼šå‰ç«¯ç¡¬ç¼–ç çš„ç­›é€‰é€‰é¡¹ä¸æ•°æ®åº“å®é™…æ•°æ®ä¸åŒ¹é…

**é—®é¢˜æè¿°**ï¼š
- å‰ç«¯ `INDUSTRY_CONFIGS` ä¸­å®šä¹‰çš„é€‰é¡¹æ˜¯ç¡¬ç¼–ç çš„
- ä¾‹å¦‚ï¼š`categories: ['ç ”å‘', 'ç®—æ³•', 'äº§å“', 'è®¾è®¡', 'è¿è¥', 'å¸‚åœº', 'HR']`
- ä½†æ•°æ®åº“ä¸­çš„ `tagDimensions.category` å¯èƒ½æ˜¯ï¼š
  - ç©ºå­—ç¬¦ä¸²ï¼ˆå¾ˆå¤šæ•°æ®ï¼‰
  - ä¸åŒçš„å€¼ï¼ˆå¦‚"å¼€å‘"ã€"å·¥ç¨‹"ç­‰ï¼‰
  - ä¸å­˜åœ¨ `tagDimensions` å­—æ®µï¼ˆæ—§æ•°æ®ï¼‰

**å½±å“**ï¼š
- ç”¨æˆ·ç‚¹å‡»"ç ”å‘"ç­›é€‰ï¼Œä½†æ•°æ®åº“ä¸­å¯èƒ½æ²¡æœ‰åŒ¹é…çš„æ•°æ®
- ç­›é€‰é€‰é¡¹æ˜¾ç¤ºæ­£å¸¸ï¼Œä½†ç»“æœä¸ºç©º

### é—®é¢˜2ï¼šåç«¯ç­›é€‰é€»è¾‘ä¸å¤„ç†ç©ºå€¼

**é—®é¢˜æè¿°**ï¼š
```javascript
// å½“å‰é€»è¾‘ï¼ˆserver/index.js è¡Œ 104-106ï¼‰
if (category && category !== 'å…¨éƒ¨') {
  contentFilter['tagDimensions.category'] = category;
}
```

**é—®é¢˜**ï¼š
- åªæŸ¥è¯¢ `tagDimensions.category` ç²¾ç¡®åŒ¹é…çš„å€¼
- ä¸å¤„ç†ï¼š
  - `tagDimensions.category` ä¸ºç©ºå­—ç¬¦ä¸²çš„æƒ…å†µ
  - `tagDimensions.category` ä¸å­˜åœ¨çš„æƒ…å†µ
  - éƒ¨åˆ†åŒ¹é…çš„æƒ…å†µï¼ˆå¦‚"ç ”å‘" vs "å¼€å‘"ï¼‰

### é—®é¢˜3ï¼šsubRole ä¾èµ– categoryï¼Œä½†é€»è¾‘ä¸å®Œæ•´

**é—®é¢˜æè¿°**ï¼š
- å‰ç«¯ `subRoles` é…ç½®ä¾èµ–äº `category`ï¼ˆè¡Œ 18-22ï¼‰
- ä¾‹å¦‚ï¼šåªæœ‰å½“ `category = 'ç ”å‘'` æ—¶ï¼Œæ‰æ˜¾ç¤º `['å‰ç«¯', 'åç«¯', ...]`
- ä½†æ•°æ®åº“ä¸­çš„ `tagDimensions.subRole` å¯èƒ½ä¸ `tagDimensions.category` ä¸åŒ¹é…
- æˆ–è€… `category` ä¸ºç©ºï¼Œä½† `subRole` æœ‰å€¼

**å½±å“**ï¼š
- ç”¨æˆ·é€‰æ‹©"ç ”å‘" â†’ "å‰ç«¯"ï¼Œä½†æ•°æ®åº“ä¸­å¯èƒ½ï¼š
  - `category` ä¸ºç©ºï¼Œ`subRole = "å‰ç«¯"`ï¼ˆåŒ¹é…ä¸åˆ°ï¼‰
  - `category = "ç ”å‘"`ï¼Œä½† `subRole` ä¸ºç©ºï¼ˆåŒ¹é…ä¸åˆ°ï¼‰

### é—®é¢˜4ï¼šç­›é€‰æ¡ä»¶æ”¹å˜æ—¶ï¼ŒuseEffect ä¾èµ–é¡¹å¯èƒ½å¯¼è‡´é‡å¤è¯·æ±‚

**é—®é¢˜æè¿°**ï¼š
```javascript
// è¡Œ 297-303ï¼šç­›é€‰æ¡ä»¶æ”¹å˜æ—¶é‡ç½®é¡µç 
useEffect(() => {
  if (activeTab === 'interviews') {
    if (currentPage !== 1) {
      setCurrentPage(1);
    }
  }
}, [filters.company, filters.location, ...]);

// è¡Œ 306-312ï¼šé¡µç æ”¹å˜æ—¶é‡æ–°è·å–æ•°æ®
useEffect(() => {
  if (activeTab === 'interviews') {
    fetchPosts(currentPage);
  }
}, [currentPage, filters.company, filters.location, ...]);
```

**é—®é¢˜**ï¼š
- ä¸¤ä¸ª `useEffect` éƒ½ä¾èµ–ç­›é€‰æ¡ä»¶
- å¯èƒ½å¯¼è‡´é‡å¤è°ƒç”¨ `fetchPosts`
- `fetchPosts` å‡½æ•°ä¸­ä½¿ç”¨çš„ `filters` å¯èƒ½æœ‰é—­åŒ…é—®é¢˜

### é—®é¢˜5ï¼šç¼ºå°‘ç­›é€‰é€‰é¡¹çš„åŠ¨æ€è·å–

**é—®é¢˜æè¿°**ï¼š
- ç­›é€‰é€‰é¡¹ï¼ˆå…¬å¸ã€åœ°ç‚¹ã€ç±»åˆ«ç­‰ï¼‰æ˜¯ç¡¬ç¼–ç åœ¨å‰ç«¯çš„
- æ²¡æœ‰ä»åç«¯è·å–å®é™…å­˜åœ¨çš„é€‰é¡¹
- ç”¨æˆ·çœ‹åˆ°çš„é€‰é¡¹å¯èƒ½ä¸å®é™…æ•°æ®ä¸åŒ¹é…

**å½±å“**ï¼š
- ç”¨æˆ·é€‰æ‹©äº†ä¸€ä¸ªç­›é€‰é€‰é¡¹ï¼Œä½†æ²¡æœ‰å¯¹åº”çš„æ•°æ®
- æ— æ³•çŸ¥é“å“ªäº›ç­›é€‰é€‰é¡¹æœ‰æ•°æ®ï¼Œå“ªäº›æ²¡æœ‰

## ğŸ’¡ å»ºè®®çš„ä¿®å¤æ–¹æ¡ˆ

### æ–¹æ¡ˆ1ï¼šä¿®å¤åç«¯ç­›é€‰é€»è¾‘ï¼Œæ”¯æŒç©ºå€¼å’Œæ¨¡ç³ŠåŒ¹é…

```javascript
// æ”¹è¿›çš„ç­›é€‰é€»è¾‘
if (category && category !== 'å…¨éƒ¨') {
  // æ”¯æŒç²¾ç¡®åŒ¹é…æˆ–ç©ºå€¼çš„æƒ…å†µ
  contentFilter['$or'] = [
    { 'tagDimensions.category': category },
    // å¦‚æœ category ä¸ºç©ºï¼Œå¯èƒ½éœ€è¦ä» role å­—æ®µæ¨æ–­
    { 'role': { $regex: category, $options: 'i' } }
  ];
}
```

### æ–¹æ¡ˆ2ï¼šå‰ç«¯ä»åç«¯åŠ¨æ€è·å–ç­›é€‰é€‰é¡¹

```javascript
// æ–°å¢ API: /api/posts/filter-options
// è¿”å›å®é™…å­˜åœ¨çš„ç­›é€‰é€‰é¡¹
{
  companies: ['Google', 'Meta', ...],
  categories: ['ç ”å‘', 'ç®—æ³•', ...],
  locations: ['åŒ—äº¬', 'ä¸Šæµ·', ...],
  // ...
}
```

### æ–¹æ¡ˆ3ï¼šä¿®å¤æ•°æ®è´¨é‡é—®é¢˜

- è¿è¡Œæ•°æ®è¿ç§»è„šæœ¬ï¼Œç¡®ä¿æ‰€æœ‰æ•°æ®éƒ½æœ‰æ­£ç¡®çš„ `tagDimensions`
- æˆ–è€…åœ¨åç«¯æŸ¥è¯¢æ—¶ï¼ŒåŒæ—¶æŸ¥è¯¢ `tagDimensions` å’Œ `role` å­—æ®µ

### æ–¹æ¡ˆ4ï¼šç®€åŒ–ç­›é€‰é€»è¾‘ï¼Œä½¿ç”¨ç»„åˆæŸ¥è¯¢

```javascript
// ä½¿ç”¨ $or ç»„åˆæŸ¥è¯¢ï¼ŒåŒæ—¶åŒ¹é…å¤šä¸ªå¯èƒ½çš„å­—æ®µ
if (category && category !== 'å…¨éƒ¨') {
  contentFilter['$or'].push(
    { 'tagDimensions.category': category },
    { 'role': { $regex: category, $options: 'i' } }
  );
}
```

## ğŸ” éœ€è¦æ£€æŸ¥çš„æ•°æ®

è¿è¡Œä»¥ä¸‹æŸ¥è¯¢æ£€æŸ¥æ•°æ®åº“ä¸­çš„å®é™…æ•°æ®ï¼š

```python
# æ£€æŸ¥ category å€¼çš„åˆ†å¸ƒ
db.posts.aggregate([
  { $match: { 'tagDimensions.category': { $exists: true, $ne: '' } } },
  { $group: { _id: '$tagDimensions.category', count: { $sum: 1 } } },
  { $sort: { count: -1 } }
])

# æ£€æŸ¥ subRole å€¼çš„åˆ†å¸ƒ
db.posts.aggregate([
  { $match: { 'tagDimensions.subRole': { $exists: true, $ne: '' } } },
  { $group: { _id: '$tagDimensions.subRole', count: { $sum: 1 } } },
  { $sort: { count: -1 } }
])
```

